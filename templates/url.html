<!DOCTYPE html>
<html>
<head>
    <title>APL Report</title>
    <script>
        let lastCount = 0;

        function checkNewFiles() {
            fetch("/check_new_files")
                .then(response => response.json())
                .then(data => {
                    const currentCount = data.count;
                    const notifyBox = document.getElementById("notification");

                    if (currentCount > lastCount) {
                        notifyBox.innerText = "üîî ‡∏°‡∏µ‡πÑ‡∏ü‡∏•‡πå APL ‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤!";
                        notifyBox.style.color = "green";
                    } else {
                        notifyBox.innerText = "‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏°‡πà";
                        notifyBox.style.color = "gray";
                    }

                    lastCount = currentCount;
                });
        }

        setInterval(checkNewFiles, 5000);  // üîÅ ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ó‡∏∏‡∏Å 5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
    </script>
</head>
<body>
    <h2>üìÑ APL Files ‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡πâ‡∏ß</h2>
    <div id="notification" style="font-weight: bold; margin-bottom: 10px;">‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏°‡πà</div>

    {% if files %}
        <ul>
        {% for file in files %}
            <li>{{ file }}</li>
        {% endfor %}
        </ul>
    {% else %}
        <p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÑ‡∏ü‡∏•‡πå</p>
    {% endif %}
</body>
</html>
